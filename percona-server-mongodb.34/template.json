{
    "builders":[{
        "type": "docker",
        "image": "debian:jessie",
        "commit": "true",
        "changes":[
            "VOLUME [\"/data/db\"]",
            "ENTRYPOINT [\"/entrypoint.sh\"]",
            "EXPOSE 27017",
            "CMD [\"mongod\"]"
        ]
    }],
    "provisioners": [
        {
            "type":"shell",
            "script": "scripts/ansible.sh"
        },
        {
            "type":"file",
            "source": "scripts/ps-entry.sh",
            "destination": "/entrypoint.sh"
        },
        {
            "type":"ansible-local",
            "playbook_file":"ansible/main.yml",
            "playbook_dir":"ansible"
        },
        {
            "type":"shell",
            "script": "scripts/cleanup.sh"
        }

        ],
    "post-processors": [
        [
            {
                "type": "docker-tag",
                "repository": "tmosleytc/packerdemo",
                "tag": "0.1"
            }
        ]
    ]
}